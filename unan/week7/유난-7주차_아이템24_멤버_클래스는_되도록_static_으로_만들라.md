# 아이템 24. 멤버 클래스는 되도록 static 으로 만들라

중첩 클래스(nested class) : 다른 클래스 안에 정의된 클래스
중첩 클래스는 자신을 감싼 바깥 클래스에서만 쓰여야 하며, 그 외에 쓰임새가 있다면 톱레벨 클래스로 만들어야 함.

중첩 클래스 종류
- 정적 멤버 클래스
- (비정적) 멤버 클래스
- 익명 클래스
- 지역 클래스

정적 멤버 클래스를 제외하고는 모두 inner class이다.

정적 멤버 클래스는 다른 클래스 안에 선언되고, 바깥 클래스의 private member에도 접근할 수 있다는 점만 제외하고는 일반 클래스와 똑같다. 정적 멤버 클래스는 다른 정적 멤버와 똑같은 접근 규칙을 적용 받는다. 예컨대 private으로 선언하면 바깥 클래스에서만 접근할 수 있는 방식이다.

정적 멤버 클래스는 흔히 바깥 클래스와 함께 쓰일 때만 유용한 public 도우미 클래스로 쓰임.


정적 멤버 클래스와 비정적 멤버 클래스의 구문상 차이는 단지 static이 붙어 있고 없고 뿐이지만, 의미상 차이는 꽤 크다.

비정적 멤버 클래스의 인스턴스는 바깥 클래스의 인스턴스와 암묵적으로 연결된다. 
비정적 멤버 클래스의 인스턴스 메서드에서 정규화된 this를 사용해 바깥 인스턴스 메소드를 호출하거나 참조를 가져올 수 있다.

=> 중첩 클래스 인스턴스와 바깥 인스턴스가 독립적으로 존재할 수 있다면 정적 클래스로 만들어야 한다.

비정적 멤버 클래스의 인스턴스와 바깥 인스턴스 사이의 관계는 멤버 클래스가 인스턴스화 될 때 확립되며, 변경할 수 없다.
-> 바깥 클래스의 인스턴스 메서드에서 비정적 멤버 클래스의 생성자를 호출할 때 자동으로 만들어지는 게 보통이지만, 직접 `바깥인스턴스Class.new Member Class(args);`를 호출해 만들기도 한다.

=> 비정적 멤버 클래스의 인스턴스안에 관계정보가 만들어져 메모리를 차지하고, 생성 시간도 더 걸린다.

비정적 멤버 클래스는 어댑터를 정의할 떄 자주쓰임.
-> 인스턴스를 갑싸 마치 다른 클래스의 인스턴스처럼 보이게 하는 뷰로 사용
ex) Map 인터페이스 구현체

**멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여서 정적 멤버 클래스로 만들자.**

static 생략 =>
1. 바깥 인스턴스로의 숨은 외부 참조를 갖게 된다. -> 시간, 공간
2. 가비지 컬렉션이 바깥 클래스의 인스턴스를 수거하지 못하는 메모리 릭

private 정적 멤버 클래스는 흔히 바깥 클래스가 표현하는 객체의 한 부분을 나타낼 때 쓴다.
키와 값을 매핑시키는 Map 인스턴스를 생각해봊자.

많은 Map 구현체는 각각의 키-쌍 값을 표현하는 엔트리(Entry) 객체들을 가지고 있다. 모든 엔트리가 맵과 연관되어 있지만, 엔트리의 메서드들은 맵을 직접 사용하지는 않는다. 
=>private 정적 멤버 클래스가 좋음.


멤버 클래스가 공개된 클래스의 Public이나 Protected 멤버 => 정적 여부가 중요햐짐.


### 익명 클래스
- 이름이 없다.
- 익명 클래스는 바깥 클래스의 멤버도 아니다.
- 익명 클래스는 응용시에 제약이 많다.
- 정적 팩토리 메서드를 구현할 때 사용
- 짧지 않으면 가독성이 떨어짐.


### 지역 클래스
- 지역변수를 선언할 수 있는 곳이면 어디서든 선언할 수 있고, 유효 범위도 지역 변수와 동일
- 멤버 클래스처럼 이름이 있고 반복 사용 가능
- 익명 클래스 처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있음.
- 정적 멤버는 가질 수 없고, 가독성을 위해 짧게 작성해야함.


### 핵심정리
메서드 밖에서도 사용해야 하고, 메서드 안에 정의하기 길다면 멤버 클래스
멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조하면 비정적, 아니면 정적

중첩 클래스가 한 메소드안에서만 쓰이면서 그 인스턴스를 생성하는 지점이 단 한 곳이고 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면, 익명 클래스, 아니면 지역 클래스


