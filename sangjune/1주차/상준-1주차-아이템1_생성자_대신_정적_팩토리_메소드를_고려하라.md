# 생성자 대신 정적 팩토리 메소드를 고려하라

## 클라이언트가 클래스의 인스턴스를 얻는 방법

1. public 생성자를 이용한다. (전통적인 수단)
2. 생성자와 별도로 정적 팩터리 메소드를 제공한다.

## 우선! 정적 메소드가 뭔데?

정적 메소드(Static method)는 클래스의 인스턴스 없이 호출할 수 있는 메소드이다. 정적 메소드는 클래스 자체에 속하며, 클래스가 로드될 때 메모리에 위치한다. 이러한 특성 때문에 인스턴스 변수에 접근할 수 없고, 오직 정적 변수(클래스 변수)나 다른 정적 메소드에만 접근할 수 있다.

정적 메소드는 주로 유틸리티 함수나, 인스턴스 생성 없이 수행할 수 있는 연산을 위해 사용된다. Java에서는 **`static`** 키워드를 통해 정적 메소드를 선언할 수 있다.

- 정적 메소드의 예

```java
public class MathUtils {
    public static int add(int a, int b) {
        return a + b;
    }
}
```

## 그럼 정적 팩토리 메소드는 뭔데?

정적 팩토리 메소드(Static factory method)는 인스턴스를 생성하는 정적 메소드이다. 이 메소드는 생성자와 유사한 기능을 수행하지만, 보다 유연한 객체 생성이 가능하다. 자세한 내용은 아래를 통해 알아보자

<details>
<summary>잠시 부족한 상식 채우기</summary>
<div markdown="1">
<b>Q. 생각해보니 정적 메소드 내부에서는 정적 메소드만 호출할 수 있는거 아닌가? 생성자는 정적 메소드가 아닌데 어떻게 가능한거지?</b>
<br/> <br/>
A. 정적 메소드는 클래스 인스턴스를 생성하지 않고도 호출할 수 있는 메소드라는 뜻이다. 생성자는 정적 메소드가 아니며 클래스의 인스턴스를 초기화하는 메소드이다. 정적 메소드는 인스턴스 멤버에 접근할 수 없으나, 생성자는 새로운 객체 인스턴스를 생성하는 메소드이므로, 정적 메소드에서 생성자를 호출하여 새 객체를 생성하는 것은 가능하다. 생성자는 기존 인스턴스의 상태와 독립적으로 새 인스턴스를 초기화하기 때문에 정적 메소드에서 사용될 수 있다.
</div>
</details>


## 정적 팩토리 메소드의 장점

1. 이름을 가질 수 있다.
   - 생성자의 경우에는 매개변수와 생성자 자체만으로 반환될 객체의 특성을 나타내지 못함
   - 정적 팩토리 메소드는 반환될 객체의 특성을 쉽게 묘사할 수 있음
2. 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.
   - 불변 클래스는 인스턴스를 미리 만들어놓거나 새로 생성한 인스턴스를 캐싱하여 재활용이 가능하며 불필요한 객체 생성을 피할 수 있음
   - 인스턴스 통제를 통해 싱글톤으로 만들 수도, 인스턴스화 불가로 만들 수도 있음
   - 불변 값 클래스에서 동치인 인스턴스가 하나뿐임을 보장할 수 있음
3. 반환 타입의 하위 타입 객체를 반환할 수 있다
   - 반한할 객체의 클래스를 자유롭게 선택할 수 있게 하여 '엄청난 유연성'을 가질 수 있음
   - 구현 클래스를 공개하지 않고 객체를 반환할 수 있음
4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다
   - 반환 타입의 하위 타입이기만 하면 어떤 클래스의 객체를 반환하든 상관 없음
   - 교재의 EnumSet 예시처럼 필요에 따라 다른 클래스의 객체를 반환할 수 있음
5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.

## 정적 팩토리 메소드의 단점

1. 상속을 하려면 public이나 protected 생성자가 필요하니 정적 팩터리 메서드만 제공하면 하위 클래스를 만들 수 없다.
   - 해당 제약은 상속보다 컴포지션을 사용하도록 유도하고 불변 타입으로 만드려면 해당 제약을 지켜아 한다는 점에서 장점일 수도 있음
2. 정적 팩터리 메서드는 프로그래머가 찾기 어렵다.
   - 그래서 일반적으로 사용하는 명명 방식들이 따로 있음  
      ex) from, of, valueOf, instance, create 등...
