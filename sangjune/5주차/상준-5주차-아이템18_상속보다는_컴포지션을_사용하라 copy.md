# 상속을 고려해 설계하고 문서화하라. 그렇지 않으면 상속을 금지하라

아이템 18에서 말했듯 상속을 염두에 두지 않고 설계하고 문서화하지 않은 '외부'(프로그래머의 통제권 밖에 있어서 언제 어떻게 변경될지 모르는) 클래스의 상속은 위험하다. 아이템 19는 상속을 고려했을 때의 설계와 문서화 그리고 상속을 고려하지 않을 때는 어떻게 해야하는지에 대한 내용이다.

## 메소드 재정의의 영향

> 여기서 말하는 재정의 가능한 메소드랑 final이 붙지 않은 public, protected 메소드

- 메서드를 재정의하면 어떤 일이 일어나는지를 정확히 정리하여 문서로 남겨야 한다. 상속용 클래스는 재정의할 수 있는 메서드들을 내부적으로 어떻게 사용하는지(자기사용) 문서로 남겨야 한다.
- 클래스의 API로 공개된 메서드에서 클래스 자신의 또 다른 메서드를 호출할 수도 있는데 그때 호출되는 메서드가 재정의 가능 메서드라면 그 사실을 호출하는 메서드의 API 설명에 적시해야 한다.
- 어떤 순서로 호출하는지, 각각의 호출 결과가 이어지는 처리에 어떤 영향을 주는지도 담아야 한다.

## 상속을 금지하는 방법

- 상속을 금지하려면 클래스 전체를 final로 선언하거나, 생성자를 private이나 package-private으로 선언하여 상속을 금지할 수 있다.

## 상속을 허용하는 클래스 설계 시 주의점

- 상속용 클래스를 설계할 때는 실제 하위 클래스를 만들어 시험해보는 것이 좋다.
- 생성자에서 재정의 가능한 메서드를 호출하지 않도록 해야 하는데 이는 생성자가 하위 클래스의 생성자보다 먼저 실행되므로 하위 클래스의 메서드가 예기치 않게 호출될 수 있기 때문이다.

## 핵심 정리

- 상속용 클래스를 설계하려면 결코 만만치 않다.
- 클래스 내부에서 스스로를 어떻게 사용하는지(자기사용 패턴) 모두 문서화하고, 이를 지켜야 한다.
- 상속을 금지하려면 클래스 전체를 final로 선언하거나, 생성자를 private으로 선언하면 된다.
