## 아이템12. toString을 항상 재정의하라

<br>

object의 기본 toString 메서드를 사용하여 출력해보면 적합한 문자열을 반환하는 것이 아닌 클래스이름@16진수로 표시한 해시코드를 반환한다. 

toString의 일반 규약에 따르면 간결하면서 사람이 읽기 쉬운 형태의 정보를 반환하라고 한다. 따라서 주소지를 알려주는 것이 더 좋은 방법이 될 것이다. 또한 toString 규약은 “모든 하위 클래스에서 이 메서드르르 재정의하라”고 말하고 있다.

<br>

toString을 잘 재정의한다면 사용하기에도 좋고, 클래스를 사용한 시스템은 디버깅하는데 좋을 것이다. 

객체를 println, printf, 문자열 연결(+), assert 구문에 넘길 때 자동으로 호출된다. 따라서 toString을 제대로 재정의하지 않는다면 쓸모없는 메시지 로그만 남게될 것이다. 


<br>

실전에서 toString은 그 객체가 가진 주요 정보 모두를 반환하는게 좋다. 하지만 객체가 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 무리가 있다. 따라서 이러한 경우에는 요약정보를 담아야한다. 또한 toString을 구현할 때면 반환값의 포맷을 문서화할지 정해야한다. 포맷을 명시라면 표준적이고 명확하고 사람이 읽을 수 있게 된다. 포맷을 명시한다면 문자열과 객체를 상호 전환할 수 있는 정적 팩터리나 생성자를 함께 제공해주면 좋다. 

포맷을 명시하는 것의 단점도 존재하는데, 포맷을 한번 명시하면 평생 그 포맷에 억매이게 된다. 반대로 포맷을 명시하지 않는다면 향후 릴리스에서 정보를 더 넣거나 포맷을 개선할 수 있는 유연성을 얻게 된다. 
포맷을 명시하든 아니든 개발자의 의도는 명확히 밝혀야한다. 

<br> 
포맷을 명시하려면 아래와 같이 아주 정확하게 해주어야한다.

```java
**
* 이 전화번호의 문자열 표현을 반환한다
* 이 문자열은 "XXX-YYY-ZZZZ 형태의 12글자로 구성된다
* XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다
* 각각의 대문자는 10진수 숫자 하나를 나타낸다
* 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면
* 앞에서부터 0으로 채워나간다. 예컨대 가입자 번호가 123 이라면 
* 전화번호의 마지막 네 문자는 "0123” 이 된다
*/
@Override public String toString() {
    return String.format("%03d—%03d—%04d",areaCode, prefix, LineNum);
}
```

포맷 명시여부와 상관없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공해야한다. 그렇지 않다면 개발자는 toString의 반환값을 파싱할 수 밖에 없다. 이는 성능이 나빠지고, 향후 포맷을 바꿀 경우 시스템이 망가질 수도 있다. 
<br>

정적 유틸리티 클래스와 열거 타입은 toString을 재정의하지 않아도 된다. 하지만 하위 클래스들이 공유해야할 문자열이 있는 추상 클래스라면 재정의 해주어야한다. 


> ✅ **핵심 정리**
모든 구체 클래스에 Object의 toString을 재정의하자. toString을 재정의 할때는 해당 객체 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환해야한다.
